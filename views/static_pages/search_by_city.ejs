<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search by City | TaiwanMe</title>
    <link rel="icon" href="/image/logo.png" type="image/png">
    
    <link rel="stylesheet" href="/style.css">

    <style>
        /* ========================================= */
        /* âœ… æ–°å¢ï¼šé‡‘é¦¬å†·çŸ¥è­˜äº’å‹•æ¨£å¼ (Fun Fact) */
        /* ========================================= */
        
        /* 1. é‡‘é¦¬æŒ‰éˆ•çš„åŒ…è£¹å®¹å™¨ (ç”¨ä¾†å®šä½åœ“æ¡†) */
        .kinmen-matsu-wrapper {
            position: relative;
            display: inline-flex; /* è®“æŒ‰éˆ•ä¿æŒä¸¦æ’ */
            gap: 15px; /* æŒ‰éˆ•ä¹‹é–“çš„é–“è· */
            margin: 0 10px; /* èˆ‡æ—é‚Šæ¾æ¹–æŒ‰éˆ•çš„è·é›¢ */
            vertical-align: middle;
        }

        /* 2. ç´…è‰²åœ“è§’æ¡†æ¡† (åœˆä½é‡‘é–€èˆ‡é¦¬ç¥–) */
        .highlight-box {
            position: absolute;
            top: -12px; bottom: -12px;
            left: -15px; right: -15px;
            border: 2px solid #E8A2A2; /* å“ç‰Œç²‰è‰² */
            border-radius: 50px; /* åœ“è§’çŸ©å½¢ */
            pointer-events: none; /* è®“é»æ“Šå¯ä»¥ç©¿é€åˆ°è£¡é¢çš„æŒ‰éˆ• */
            animation: pulse-border 2s infinite;
        }

        /* 3. å‘å³å»¶ä¼¸çš„è™›ç·š */
        .dashed-pointer {
            position: absolute;
            top: 50%;
            right: -70px; /* ä¼¸å‡ºæ¡†æ¡†å³é‚Š */
            width: 70px;
            height: 2px;
            background-image: linear-gradient(to right, #E8A2A2 50%, transparent 50%);
            background-size: 10px 100%;
            transform: translateY(-50%);
        }

        /* 4. Fun Fact è§¸ç™¼æŒ‰éˆ• */
        .fun-fact-trigger {
            position: absolute;
            top: 50%;
            right: -170px; /* å®šä½åœ¨è™›ç·šæœ«ç«¯ */
            transform: translateY(-50%);
            background-color: #E8A2A2;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            font-family: serif;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(232, 162, 162, 0.3);
            transition: all 0.3s ease;
            white-space: nowrap;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .fun-fact-trigger:hover {
            background-color: #d68b8b;
            transform: translateY(-53%) scale(1.05); /* å¾®å¹…ä¸Šæµ® */
        }

        /* æ‰‹æ©Ÿç‰ˆèª¿æ•´ï¼šç‚ºäº†é¿å…ç‰ˆé¢æ“ å£“ï¼Œæ‰‹æ©Ÿç‰ˆå°‡ Fun Fact ç§»åˆ°ä¸‹æ–¹ */
        @media (max-width: 768px) {
            .kinmen-matsu-wrapper {
                display: inline-flex;
                flex-wrap: wrap;
                justify-content: center;
                margin-bottom: 45px; /* ç•™ç©ºé–“çµ¦ä¸‹æ–¹çš„ Fun Fact */
            }
            .dashed-pointer {
                display: none; /* æ‰‹æ©Ÿç‰ˆéš±è—è™›ç·š */
            }
            .fun-fact-trigger {
                top: auto; 
                bottom: -40px; /* ç§»åˆ°æŒ‰éˆ•æ­£ä¸‹æ–¹ */
                right: auto;
                left: 50%;
                transform: translateX(-50%);
            }
            .fun-fact-trigger:hover {
                transform: translateX(-50%) scale(1.05);
            }
        }

        /* å‹•ç•«æ•ˆæœ */
        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0 rgba(232, 162, 162, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(232, 162, 162, 0); }
            100% { box-shadow: 0 0 0 0 rgba(232, 162, 162, 0); }
        }

        /* ========================================= */
        /* âœ… Modal å½ˆå‡ºè¦–çª—æ¨£å¼ */
        /* ========================================= */
        .fact-modal {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 10002;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(5px);
        }
        .fact-modal.show { opacity: 1; }

        .fact-card {
            background: #fff;
            width: 90%;
            max-width: 700px;
            max-height: 85vh;
            border-radius: 4px;
            padding: 50px;
            position: relative;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }
        .fact-modal.show .fact-card { transform: translateY(0); }

        .fact-close {
            position: absolute; top: 20px; right: 25px;
            font-size: 2.5rem; color: #ccc; cursor: pointer;
            line-height: 1; transition: color 0.2s;
        }
        .fact-close:hover { color: #333; }

        .fact-header {
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .fact-tag {
            color: #E8A2A2;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
        }
        .fact-title {
            font-family: serif;
            font-size: 2rem; 
            color: #333;
            line-height: 1.2;
            margin: 0;
        }

        .fact-body h3 {
            font-size: 1.3rem; margin-top: 40px; margin-bottom: 15px;
            color: #333; font-weight: bold; font-family: serif;
        }
        .fact-body p {
            font-size: 1.05rem; line-height: 1.8; color: #555;
            margin-bottom: 20px; text-align: justify;
        }
        .fact-highlight {
            border-left: 4px solid #E8A2A2;
            padding-left: 20px;
            margin: 30px 0;
            font-family: serif;
            font-style: italic;
            font-size: 1.2rem;
            color: #444;
            line-height: 1.6;
        }
        @media (max-width: 600px) {
            .fact-card { padding: 30px 20px; }
            .fact-title { font-size: 1.6rem; }
        }
    </style>
</head>
<body>

    <%- include('../partials/header') %>

    <div class="city-banner"></div>

    <h1 class="page-main-title">Search By Region</h1>

    <section class="region-list-container">
        
        <div class="region-block" id="north">
            <div class="region-title">NORTH</div>
            <div class="city-tags">
                <a href="/search_by_city/taipei" class="city-btn">Taipei (å°åŒ—)</a>
                <a href="/search_by_city/new_taipei" class="city-btn">New Taipei (æ–°åŒ—)</a>
                <a href="/search_by_city/keelung" class="city-btn">Keelung (åŸºéš†)</a>
                <a href="/search_by_city/taoyuan" class="city-btn">Taoyuan (æ¡ƒåœ’)</a>
                <a href="/search_by_city/hsinchu" class="city-btn">Hsinchu (æ–°ç«¹)</a>
                <a href="/search_by_city/yilan" class="city-btn">Yilan (å®œè˜­)</a>
            </div>
        </div>

        <div class="region-block" id="central">
            <div class="region-title">CENTRAL</div>
            <div class="city-tags">
                <a href="/search_by_city/miaoli" class="city-btn">Miaoli (è‹—æ —)</a>
                <a href="/search_by_city/taichung" class="city-btn">Taichung (å°ä¸­)</a>
                <a href="/search_by_city/changhua" class="city-btn">Changhua (å½°åŒ–)</a>
                <a href="/search_by_city/nantou" class="city-btn">Nantou (å—æŠ•)</a>
                <a href="/search_by_city/yunlin" class="city-btn">Yunlin (é›²æ—)</a>
            </div>
        </div>

        <div class="region-block" id="south">
            <div class="region-title">SOUTH</div>
            <div class="city-tags">
                <a href="/search_by_city/chiayi" class="city-btn">Chiayi (å˜‰ç¾©)</a>
                <a href="/search_by_city/tainan" class="city-btn">Tainan (å°å—)</a>
                <a href="/search_by_city/kaohsiung" class="city-btn">Kaohsiung (é«˜é›„)</a>
                <a href="/search_by_city/pingtung" class="city-btn">Pingtung (å±æ±)</a>
            </div>
        </div>

        <div class="region-block" id="east">
            <div class="region-title">EAST</div>
            <div class="city-tags">
                <a href="/search_by_city/hualien" class="city-btn">Hualien (èŠ±è“®)</a>
                <a href="/search_by_city/taitung" class="city-btn">Taitung (å°æ±)</a>
            </div>
        </div>

        <div class="region-block" id="islands">
            <div class="region-title">OUTLYING<br>ISLANDS</div>
            
            <div class="island-section-wrapper">
                
                <div class="city-tags" style="align-items: center;">
                    <a href="/search_by_city/penghu" class="city-btn">Penghu (æ¾æ¹–)</a>
                    
                    <div class="kinmen-matsu-wrapper">
                        <div class="highlight-box"></div> <div class="dashed-pointer"></div> <div class="fun-fact-trigger" id="openFactBtn">ğŸ’¡ Fun Fact</div> <a href="/search_by_city/kinmen" class="city-btn">Kinmen (é‡‘é–€)</a>
                        <a href="/search_by_city/matsu" class="city-btn">Matsu (é¦¬ç¥–)</a>
                    </div>
                </div>

                <div class="island-separator">
                    <span class="separator-label">Islands affiliated with other counties</span>
                </div>

                <div class="city-tags">
                    <a href="/search_by_city/pingtung/pt-07" class="city-btn">Xiao Liuqiu (å°ç‰çƒ)</a> 
                    <a href="/search_by_city/taitung/tt-07" class="city-btn">Green Island (ç¶ å³¶)</a>   
                    <a href="/search_by_city/taitung/tt-08" class="city-btn">Orchid Island (è˜­å¶¼)</a>  
                    <a href="/search_by_city/yilan/yl-07" class="city-btn">Guishan Island (é¾œå±±å³¶)</a> 
                    <a href="/search_by_city/keelung/kl-05" class="city-btn">Keelung Islet (åŸºéš†å¶¼)</a>
                </div>

            </div>
        </div>

    </section>

    <%- include('../partials/footer') %>

    <div id="factModal" class="fact-modal">
        <div class="fact-card">
            <div class="fact-close" id="closeFactBtn">&times;</div>
            
            <div class="fact-header">
                <span class="fact-tag">Historical Paradox</span>
                <h2 class="fact-title">Wait, my ID card says "Fujian Province, Republic of China"?</h2>
            </div>

            <div class="fact-body">
                <p>If you check the ID card of a resident from Kinmen or Matsu, youâ€™ll notice a startling detail: the place of issuance isn't "Taiwan ," but rather <strong>"Fujian Province, Republic of China."</strong></p>
                
                <p>This detail hides a heavy history. When the R.O.C. government retreated to Taiwan in 1949, it maintained the administrative structure of "Fujian Province" (covering Kinmen and Matsu) to assert its legitimacy over the mainland. Despite the rise of Taiwanese self-determination movements and calls to amend the constitution to reflect reality, this title remainsâ€”a frozen relic of a political stalemate.</p>

                <h3>The Exclusive "Kinmen-Matsu Permit"</h3>
                <p>Beyond the ID card, residents hold a unique travel visa to China. Those registered in Kinmen or Matsu for over six months can apply for a special <strong>"Kinmen-Matsu Permit."</strong></p>
                <p>Due to the "Mini-Three Links" agreement, this permit allows residents to take a 30-minute ferry ride directly to China. For locals, popping over to China for dinner or shopping is often faster than traveling to Taipei!</p>

                <h3>The Conflict of Identity</h3>
                <div class="fact-highlight">
                    "On the map, they are miles apart; in the heart, the distance is even more intriguing."
                </div>
                <p>This creates a fascinating phenomenon among the younger generation. When traveling abroad, they unhesitatingly identify as <strong>"Taiwanese."</strong> Yet, back home, holding an ID card printed with "Fujian Province" serves as a constant reminder of a historical destiny distinct from the main island of Taiwan.</p>
            </div>
        </div>
    </div>

    <script src="/script.js"></script>
    <script>
        // âœ… Fun Fact Modal äº’å‹•é‚è¼¯
        const openFactBtn = document.getElementById('openFactBtn');
        const closeFactBtn = document.getElementById('closeFactBtn');
        const factModal = document.getElementById('factModal');

        if(openFactBtn && factModal) {
            openFactBtn.addEventListener('click', () => {
                factModal.style.display = 'flex';
                // å¼·åˆ¶é‡ç¹ªä»¥è§¸ç™¼ transition
                setTimeout(() => factModal.classList.add('show'), 10);
                document.body.style.overflow = 'hidden'; // é˜²æ­¢èƒŒæ™¯æ²å‹•
            });

            function closeFact() {
                factModal.classList.remove('show');
                setTimeout(() => {
                    factModal.style.display = 'none';
                    document.body.style.overflow = '';
                }, 300); // ç­‰å¾…å‹•ç•«çµæŸ
            }

            closeFactBtn.addEventListener('click', closeFact);
            
            // é»æ“ŠèƒŒæ™¯é—œé–‰
            factModal.addEventListener('click', (e) => {
                if (e.target === factModal) closeFact();
            });
        }
    </script>

</body>
</html>