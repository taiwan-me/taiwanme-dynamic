<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= cityName %> Guide | TaiwanMe</title>
    <link rel="icon" href="/image/logo.png" type="image/png">
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&family=Noto+Sans+TC:wght@300;400&family=Lato:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">

    <style>
        /* --- 頁面專屬動態樣式 --- */
        /* 注意：大部分排版樣式已移至 style.css (.feed-grid, .feed-card 等)。
           此處僅保留需要根據 citySlug 動態改變的 Banner 背景圖邏輯。
        */

        .city-hero-banner {
            /* 預設背景色，防止圖片載入前閃白 */
            background-color: #333; 
            
            /* [全台灣 20 縣市 Banner 邏輯整合] */
            background-image: 
            <% if (citySlug === 'pingtung') { %>
                url('/image/search_by_city/pingtung_banner.png');
            <% } else if (citySlug === 'kaohsiung') { %>
                url('/image/search_by_city/kaohsiung_banner.png');
            <% } else if (citySlug === 'chiayi') { %>
                url('/image/search_by_city/chiayi_banner.png');
            <% } else if (citySlug === 'tainan') { %>
                url('/image/search_by_city/tainan_banner.png');
            <% } else if (citySlug === 'taitung') { %>
                url('/image/search_by_city/taitung_banner.png');
            <% } else if (citySlug === 'hualien') { %>
                url('/image/search_by_city/hualien_banner.png');
            <% } else if (citySlug === 'yunlin') { %>
                url('/image/search_by_city/yunlin_banner.png');
            <% } else if (citySlug === 'nantou') { %>
                url('/image/search_by_city/nantou_banner.png');
            <% } else if (citySlug === 'changhua') { %>
                url('/image/search_by_city/changhua_banner.png');
            <% } else if (citySlug === 'taichung') { %>
                url('/image/search_by_city/taichung_banner.png');
            <% } else if (citySlug === 'miaoli') { %>
                url('/image/search_by_city/miaoli_banner.png');
            <% } else if (citySlug === 'hsinchu') { %>
                url('/image/search_by_city/hsinchu_banner.png');
            <% } else if (citySlug === 'yilan') { %>
                url('/image/search_by_city/yilan_banner.png');
            <% } else if (citySlug === 'taoyuan') { %>
                url('/image/search_by_city/taoyuan_banner.png');
            <% } else if (citySlug === 'keelung') { %>
                url('/image/search_by_city/keelung_banner.png');
            <% } else if (citySlug === 'new_taipei') { %>
                url('/image/search_by_city/new_taipei_banner.png');
            <% } else if (citySlug === 'taipei') { %>
                url('/image/search_by_city/taipei_banner.png');
            <% } else if (citySlug === 'penghu') { %>
                url('/image/search_by_city/penghu_banner.png');
            <% } else if (citySlug === 'kinmen') { %>
                url('/image/search_by_city/kinmen_banner.png');
            <% } else if (citySlug === 'matsu') { %>
                url('/image/search_by_city/matsu_banner.png');
            <% } else { %>
                /* 預設 Fallback：如果沒有特定 Banner，嘗試讀取該城市資料夾下的預設圖 */
                url('/image/search_by_city/<%= citySlug %>/banner_city.jpg');
            <% } %>;
        }
    </style>
</head>
<body>
    
    <%- include('../partials/header') %> 
    
    <div class="city-hero-banner">
        <div class="city-hero-overlay">
            <h1 class="city-name-title"><%= cityName %></h1>
            <p style="margin: 10px 0 0; font-family: 'Lato'; letter-spacing: 2px; font-weight: 700; color: #555;">
                THE HIDDEN GEMS
            </p>
        </div>
    </div>

    <div class="feed-grid">
        <% if (typeof cityData !== 'undefined' && cityData.length > 0) { %>
            <% cityData.forEach(function(article) { %>
                <a href="/search_by_city/<%= citySlug %>/<%= article.id %>" class="feed-card">
                    
                    <div class="feed-img-box">
                        <img src="<%= article.heroImage %>" class="feed-img" alt="<%= article.title %>" onerror="this.src='https://placehold.co/600x400/eee/333?text=TaiwanMe'">
                    </div>
                    
                    <div class="feed-content">
                        <div class="feed-tags">
                            <% article.tags.slice(0, 2).forEach(function(tag){ %> 
                                <span style="background-color: #f0f0f0; color: #777; padding: 4px 12px; border-radius: 15px; font-size: 0.75rem; text-transform: uppercase;">
                                    #<%= tag %>
                                </span> 
                            <% }); %>
                        </div>
                        
                        <h2 class="feed-title">[<%= article.type %>] <%= article.title %></h2>
                        <p class="feed-intro"><%= article.intro %></p>
                        
                        <span class="feed-btn">Read Itinerary ➝</span>
                    </div>
                </a>
            <% }); %>
        <% } else { %>
            <div style="text-align: center; grid-column: 1 / -1; padding: 100px 20px;">
                <h3 style="color: #999; font-family: 'Lato'; font-size: 2rem;">Coming Soon...</h3>
                <p style="color: #bbb;">We are currently exploring <%= cityName %> to bring you the best guides.</p>
            </div>
        <% } %>
    </div>

    <%- include('../partials/footer') %>

    <script src="/script.js"></script>
</body>
</html>