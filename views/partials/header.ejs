<% 
// --- EJS ÈÇèËºØÂçÄ ---
const getActiveStyle = (targetPage) => {
    return (typeof pageName !== 'undefined' && pageName === targetPage) 
        ? 'color: var(--accent-color); font-weight: bold;' 
        : '';
}
const mapLink = (typeof pageName !== 'undefined' && pageName === 'index') ? '#mapSection' : '/#mapSection';
%>

<header id="header">
    <div class="logo">
        <a href="/" style="text-decoration: none; display: flex; align-items: center; gap: 15px;">
            <img src="/image/logo.png" alt="TaiwanMe Logo">
            <span class="logo-text">THE REAL TASTE OF TAIWAN</span>
        </a>
    </div>

    <div class="header-links">
        <a href="#" class="h-link" id="tippingBtn">BUY US<br>A BOBA</a>
        <a href="#" class="h-link" id="philosophyBtn">TAIWANME'S<br>PHILOSOPHY</a>
        <a href="#" class="h-link" id="bizInquiryBtn">BUSINESS<br>INQUIRY</a>
    </div>

    <div class="nav-icons">
        <button id="searchBtn">üîç Search</button>
    </div>
</header>

<div id="searchModal" class="search-modal">
    <div class="close-search">&times;</div>
    <div class="search-content">
        <h2>Where to explore?</h2>
        <input type="text" placeholder="Enter keywords (e.g. Taipei, Food)...">
        <button class="submit-search">Search</button>
    </div>
</div>

<nav class="mobile-grid-nav">
    <a href="/search_by_city" class="grid-btn" style="<%= getActiveStyle('search_by_city') %>">SEARCH BY CITY</a>
    <a href="/festivals" class="grid-btn" style="<%= getActiveStyle('festivals') %>">SEASONAL FESTIVALS</a>
    <a href="/transport" class="grid-btn" style="<%= getActiveStyle('transport') %>">TRANSPORT</a>
    <a href="/culture" class="grid-btn" style="<%= getActiveStyle('culture') %>">CULTURE & DAILY LIFE</a>
    <a href="/dining" class="grid-btn" style="<%= getActiveStyle('dining') %>">INCLUSIVE DINING</a>
    <a href="#" class="grid-btn menu-btn" id="mobileMoreBtn">MORE +</a>
</nav>

<div id="mobileMoreMenu" class="mobile-more-menu" style="display: none;">
    <a href="/entertainment" style="<%= getActiveStyle('entertainment') %>">ENTERTAINMENT</a>
    <a href="#" id="bizInquiryBtnMobile">BUSINESS INQUIRY</a>
    <a href="#" id="tippingBtnMobile">DONATE (Buy us a Boba)</a>
</div>

<nav class="desktop-nav">
    <ul>
        <li><a href="<%= mapLink %>" style="<%= getActiveStyle('hidden_gems') %>">HIDDEN GEMS</a></li>
        <li><a href="/search_by_city" style="<%= getActiveStyle('search_by_city') %>">SEARCH BY CITY</a></li>
        <li><a href="/festivals" style="<%= getActiveStyle('festivals') %>">SEASONAL FESTIVALS</a></li>
        <li><a href="/transport" style="<%= getActiveStyle('transport') %>">TRANSPORT</a></li>
        <li><a href="/culture" style="<%= getActiveStyle('culture') %>">CULTURE & DAILY LIFE</a></li>
        <li><a href="/dining" style="<%= getActiveStyle('dining') %>">INCLUSIVE DINING</a></li>
        <li><a href="/entertainment" style="<%= getActiveStyle('entertainment') %>">ENTERTAINMENT</a></li>
        
        <li class="dropdown-item">
            <a href="#" class="dropbtn">MORE ‚ñæ</a>
            <div class="dropdown-content">
                <a href="#" onclick="document.getElementById('philosophyBtn').click(); return false;">Philosophy</a>
                <a href="#" onclick="document.getElementById('bizInquiryBtn').click(); return false;">Business</a>
            </div>
        </li>
    </ul>
</nav>